---
alwaysApply: true
description: Security, secrets, and logging rules
---
## Security and Secrets Handling

### Secrets and env vars
- Never hardcode secrets. Read from environment variables and/or `.env` (excluded via `.gitignore`).
- Required secrets: `DERIBIT_CLIENT_ID`, `DERIBIT_CLIENT_SECRET`. Optional: Redis password, Mongo credentials.

### Logging and PII
- Do not log secrets or full payloads containing tokens.
- Use structured logging; prefer INFO for normal ops and DEBUG for verbose dev only.

### Validation and retries
- Collectors must validate real data (no defaults). Use retry/backoff utilities in `BaseDataCollector`.
- Respect rate limits; configure rate limiter via settings.

### Permissions and DB
- Use least-privilege DB users for read/write operations when running in Docker/cloud.
- Maintain indexes in code and run initialization on startup to ensure consistent performance.

